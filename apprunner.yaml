# apprunner.yaml - AWS App Runnerè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
version: 1.0
runtime: docker

build:
  commands:
    build:
      - echo "ğŸ€ NBA Analytics Dashboard ã‚’ãƒ“ãƒ«ãƒ‰ä¸­..."
      - echo "Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª"
      - python --version
      - echo "ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
      - pip install --upgrade pip
      - pip install -r requirements.txt
      - echo "âœ… ãƒ“ãƒ«ãƒ‰å®Œäº†"

run:
  runtime-version: latest
  command: streamlit run app.py --server.port=8080 --server.address=0.0.0.0 --server.headless=true --server.runOnSave=false --server.allowRunOnSave=false
  network:
    port: 8080
    env: PORT
  env:
    # App Runnerç”¨ç’°å¢ƒå¤‰æ•°
    - name: PORT
      value: "8080"
    - name: STREAMLIT_SERVER_PORT
      value: "8080"
    - name: STREAMLIT_SERVER_ADDRESS
      value: "0.0.0.0"
    - name: STREAMLIT_SERVER_HEADLESS
      value: "true"
    - name: STREAMLIT_BROWSER_GATHER_USAGE_STATS
      value: "false"
    # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: PYTHONDONTWRITEBYTECODE
      value: "1"
    # App Runnerè­˜åˆ¥ç”¨
    - name: DEPLOYMENT_ENV
      value: "AWS_APP_RUNNER"